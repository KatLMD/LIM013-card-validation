<html>
<body>


<input type="text" id="demo" oninput="myFunction()">


<button onclick="aprendicreo()">probar</button>


<script>

numeroTarjeta = ''

function aprendicreo() { // nombre de mi funcion
    numero = numeroTarjeta//document.getElementById("demo").value // le asignamos a numero el valor del input demo
    nuevoArray = numero.split("") // convertimos el numero en un arreglo y se le asigna a nuevoArray
    sumaTotal = 0 // creamos una variable con valor 0 para que se sume con los resultados parciales 
    nuevoArray.forEach((elemento,posicion)=> {
        elemento = parseInt(elemento)
        console.log(elemento)
        // posicion%2 =>  poscion es par  => respues es 0
        // posicion%2 =>  poscion es inpar => respueta es 1
        if (posicion%2==0) {
            console.log("soy par")
            ab = 2*elemento
            if(ab>=10){
                a = Math.floor(ab/10)
                b = ab - a*10
                sumaTotal = a + b + sumaTotal
            }else{
                sumaTotal = ab  + sumaTotal
            }          
        }else{ 
            console.log("soy impar")

            sumaTotal = sumaTotal +elemento

        }
    }); 
    console.log(sumaTotal)

    if (sumaTotal%10==0) {
        console.log("Su tarjeta es valida")
        
    }else{
        console.log("Su tarjeta no es valida")
    }

    numeroTarjeta = ''
  
}

function myFunction() {
  texto = document.getElementById("demo").value
  ultimodigito = texto.substring(texto.length-1,texto.length)
  numeroTarjeta = numeroTarjeta + ultimodigito
  valor =''
  if(texto.length>4){
  	for(i=0;i<texto.length-4;i++){
		valor = valor + '#'
	}
    document.getElementById("demo").value = valor + numeroTarjeta.substring(numeroTarjeta.length-4,numeroTarjeta.length)
   }
}
    
</script>

</body>
</html>
